<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!--=== Hotel Folio ==== -->
    <!-- Form view of hotel folio -->
    <record model="ir.ui.view" id="hotel_folio_view_form">
        <field name="name">hotel.folio.form</field>
        <field name="model">hotel.folio</field>
        <field name="arch" type="xml">
            <form string="Folio">
                <header>
                    <!-- <field name="has_confirmed_reservations_to_send" invisible="1" /> -->
                    <!-- <field name="has_cancelled_reservations_to_send" invisible="1" /> -->
                    <!-- <field name="has_checkout_to_send" invisible="1" /> -->
                    <button name="action_confirm" states="draft" string="Confirm Sale"
                        class="btn-primary" type="object" />
                    <!-- <button name="send_reservation_mail" type="object" string="Send Confirmation Email"
                       attrs="{'invisible': [('has_confirmed_reservations_to_send', '=', False)]}" class="oe_highlight"/> -->
                    <!-- <button name="send_cancel_mail" type="object" string="Send Cancel Email"
                       attrs="{'invisible': [('has_cancelled_reservations_to_send', '=', False)]}" class="oe_highlight"/> -->
                    <!-- <button name="send_exit_mail" type="object" string="Send Exit Email"
                       attrs="{'invisible': [('has_checkout_to_send', '=', False)]}" class="oe_highlight"/> -->
                    <!-- <button name="%(hotel.action_view_folio_advance_payment_inv)d"
                        string="Create Invoice" type="action" class="btn-primary" states="sale"
                        attrs="{'invisible': [('invoice_status', '!=', 'to invoice')]}"/> -->
                    <!-- <button name="action_cancel_draft" states="cancel,sale" string="Set to Draft"
                        type="object" icon="fa-undo" class="oe_highlight" /> -->
                    <button name="action_cancel" string="Cancel Folio" states="sale"
                        type="object" icon="fa-minus-square" class="oe_highlight" />
                    <button name="action_cancel" string="Cancel Folio" states="draft"
                        icon="fa-minus-square" type="object" class="oe_highlight" />
                    <button name="action_done" type="object" string="Set to Done"
                        help="If a Hotel Folio is done, you cannot modify it manually anymore. However, you will still be able to invoice or deliver. This is used to freeze the Hotel Folio." />
                        <!-- states="sale" attrs="{'invisible': [('invoice_status', '!=', 'invoiced')]}" -->
                    <!-- <button name="print_quotation" string="Print" type="object" states="sent,sale"/> -->
                    <field name="state" select="2" widget="statusbar"
                        statusbar_visible="draft,sent,sale,done" invisible="1"/>
                </header>

                <sheet>
                    <div class=" oe_button_box">
                        <button type="action" class="oe_stat_button"
                            id="checkin_partner_smart_button"
                            icon="fa-user-plus"
                            name="%(launch_checkin_wizard_add)d"
                            attrs="{'invisible': [('checkin_partner_pending_count','&lt;=',0)]}"
                            context="{'partner_id': partner_id,'reservation_ids': room_lines,
                                        'hidden_checkin_partner': True, 'folio': active_id}">
                            <div class="o_form_field o_stat_info">
                                <span class="o_stat_value"><field name="checkin_partner_pending_count"
                                widget="statinfo" nolabel="1"/></span>
                                <span class="o_stat_text">Pending Checks</span>
                            </div>
                        </button>

                        <button type="object" class="oe_stat_button"
                            id="checkin_partner_smart_button"
                            icon="fa-users"
                            name="action_checks"
                            attrs="{'invisible': [('checkin_partner_count','&lt;=',0)]}">
                            <div class="o_form_field o_stat_info">
                              <span class="o_stat_value"><field name="checkin_partner_count"
                               widget="statinfo" nolabel="1"/></span>
                              <span class="o_stat_text">Checks</span>
                            </div>
                        </button>
                        <field name="currency_id" invisible="1"/>

                        <!-- <button type="object" class="oe_stat_button"
                            id="invoices_smart_button"
                            icon="fa-thumbs-up"
                            name="action_payments"
                            attrs="{'invisible': [('invoices_paid','&lt;=',0)]}">
                            <div class="o_form_field o_stat_info">
                                <span class="o_stat_value">
                                    <field name="invoices_paid" nolabel="1"
                                    widget="monetary" options="{'currency_field': 'currency_id'}"/>
                                </span>
                                <span class="o_stat_text">Paid out</span>
                            </div>
                        </button> -->

                        <!-- <button type="object" class="oe_stat_button"
                            id="payment_smart_button"
                            icon="fa-money"
                            name="action_pay"
                            attrs="{'invisible': ['|',('pending_amount','&lt;=',0)]}">
                            <div class="o_form_field o_stat_info">
                                <span class="o_stat_value">
                                    <field name="pending_amount" nolabel="1"
                                    widget="monetary" options="{'currency_field': 'currency_id'}"/>
                                </span>
                                <span class="o_stat_text">Pending Payment</span>
                            </div>
                        </button> -->

                        <!-- <button type="object" class="oe_stat_button"
                            id="refunds_smart_button"
                            icon="fa-undo"
                            name="action_return_payments"
                            attrs="{'invisible': [('refund_amount','&lt;=',0)]}">
                            <div class="o_form_field o_stat_info">
                                <span class="o_stat_value">
                                    <field name="refund_amount" nolabel="1"
                                    widget="monetary" options="{'currency_field': 'currency_id'}"/>
                                </span>
                                <span class="o_stat_text">Refunds</span>
                            </div>
                        </button> -->

                        <!-- <button type="object" class="oe_stat_button" id="invoice_button"
                            icon="fa-pencil-square-o" name="open_invoices_folio"
                            attrs="{'invisible': [('num_invoices', '=', 0)]}"
                            context="{'default_folio_id': active_id}">
                            <div class="o_form_field o_stat_info">
                                <span class="o_stat_value">
                                    <field name="num_invoices"/>
                                </span>
                                <span class="o_stat_text">Invoices</span>
                            </div>
                         </button> -->

                    </div>
                    <!-- <field name="image" widget="image" class="oe_avatar" options="{&quot;preview_image&quot;: &quot;image_medium&quot;, &quot;size&quot;: [90, 90]}"/> -->
                    <h2><field name="name"/></h2>
                    <h1>
                        <field name="partner_id" default_focus="1" placeholder="Guest" attrs="{'invisible':[('reservation_type','in',('out'))]}"/>
                        <field name="closure_reason_id" placeholder="Closure reason" default_focus="1" attrs="{'invisible':[('reservation_type','not in',('out'))]}"/>
                    </h1>
                    <group>
                        <group>
                            <field name="email" placeholder="email"/>
                            <field name="mobile" placeholder="mobile"/>
                            <field name="phone" />
                            <field name="cancelled_reason" attrs="{'invisible':[('state','not in',('cancel'))]}"/>
                        </group>
                        <group>
                            <field name="pricelist_id" domain="[('type','=','sale')]" />
                            <field name="company_id" options="{'no_create': True}" groups="base.group_multi_company"/>
                            <field name="reservation_type" attrs="{'readonly':[('state','not in',('draft'))]}"/>
                            <field name="channel_type" attrs="{'required':[('reservation_type','=','normal')]}"/>
                            <field name="segmentation_ids" widget="many2many_tags" placeholder="Segmentation..."
                                options="{'no_create': True,'no_open': True}" />
                        </group>
                        <group>
                            <field name="partner_internal_comment"/>
                        </group>
                        <group>
                            <field name="internal_comment"/>
                        </group>
                     </group>
                    <group invisible="1">
                        <!-- <field name="partner_shipping_id" invisible="1" domain="[('parent_id','=',partner_id)]" /> -->
                        <!-- <field name="warehouse_id" string="Branch" invisible="1"/> -->
                        <field name="invoice_ids" invisible="1"/>
                        <field name="invoice_status" invisible="1" />
                        <!-- <field name="hotel_invoice_id" states='progress,done,cancel'
                            readonly="1" invisible="1" /> -->
                    </group>
                    <notebook colspan="4" col="1">
                        <page string="Lines">
                            <field name="room_lines" colspan="4" string="Room Line"
                                nolabel="1" context="{'room_lines':room_lines,'folio_id': id}">
                                <tree string="Rooms"
                                      colors="red:state == 'cancelled'"
                                      default_order="id"
                                      delete="false"
                                      options="{'no_open': True}">
                                    <button type="object" class="oe_stat_button"
                                        id="splitted" icon="fa fa-1x fa-chain-broken"
                                        name="open_master"
                                        attrs="{'invisible':[('splitted','=', False)]}"
                                    />
                                    <field name="folio_id" invisible="1"/>
                                    <field name="state" />
                                    <button type="action" class="oe_stat_button"
                                        id="checkin_partner_smart_button" icon="fa fa-1x fa-user-plus"
                                        name="%(launch_checkin_wizard_add)d"
                                        context="{'partner_id': partner_id,'enter_date': checkin,
                                            'exit_date': checkout,'reservation_id': id, 'hidden_checkin_partner': True, 'edit_checkin_partner': True }"
                                        attrs="{'invisible':['|','|', ('state','not in',('confirm','booking')),
                                            ('checkin_partner_pending_count','=', 0),('parent_reservation','!=',False)]}"
                                    />
                                    <field name="partner_id"/>
                                    <field name="splitted" invisible="1" />
                                    <field name="parent_reservation" invisible="1" />
                                    <!-- <field name="room_type_id" string="Reserved Room Type"/> -->
                                    <field name="room_type_id" string="Reserved Room Type"/>
                                    <field name="nights" />
                                    <field name="adults" string="Persons"/>
                                    <field name="checkin" widget="date"/>
                                    <field name="checkout"  widget="date"/>
                                    <field name="checkin_partner_ids" invisible ="1"/>
                                    <field name="to_assign" invisible="1"/>
                                    <field name="checkin_partner_pending_count" invisible="1"/>
                                    <!-- <field name="qty_delivered" invisible="1"/> -->
                                        <!-- attrs="{'readonly': [('qty_delivered_updateable', '=', False)]}"/> -->
                                    <!-- <field name="qty_invoiced" invisible="1"/> -->
                                    <!-- <field name="qty_to_invoice" invisible="1"/> -->
                                    <!-- <field name="product_uom"
                                        attrs="{'readonly': [('state', 'in', ('sale','done', 'cancel'))]}"
                                        context="{'company_id': parent.company_id}"
                                        groups="product.group_uom" options='{"no_open": True}'
                                        invisible="1"/> -->
                                    <!-- <field name="analytic_tag_ids" groups="analytic.group_analytic_accounting" widget="many2many_tags" invisible="1"/> -->
                                    <!-- <field name="tax_id" widget="many2many_tags" domain="[('type_tax_use','=','sale'),('company_id','=',parent.company_id)]"
                                       invisible="1"/> -->
                                    <!-- <field name="qty_delivered_updateable" invisible="1"/> -->
                                    <field name="state" invisible="1"/>
                                    <!-- <field name="invoice_status" invisible="1"/> -->
                                    <!-- <field name="customer_lead" invisible="1"/> -->
                                    <!-- <field name="currency_id" invisible="1"/> -->
                                    <!-- <field name="price_unit" invisible="1"/> -->
                                    <!-- <field name="amount_room" string="Reservation Price" readonly="1"/>-->
                                    <!-- <field name="amount_discount" string="Final Price"/> -->
                                    <button type="object" class="oe_stat_button"
                                        id="go_reservation" icon="fa fa-2x fa-bars"
                                        name="open_reservation_form"/>
                                </tree>
                                <form string="Reservation" >
                                    <sheet>
                                        <header>
                                            <field name="splitted" invisible="1" />
                                            <field name="shared_folio" invisible="1"/>
                                            <field name="folio_id" invisible="1" />
                                            <field name="partner_id" invisible="1"/>
                                            <field name="parent_reservation" invisible="True" />
                                            <!-- <field name="has_confirmed_reservations_to_send" invisible="1" /> -->
                                            <!-- <field name="has_cancelled_reservations_to_send" invisible="1" /> -->
                                            <!-- <field name="has_checkout_to_send" invisible="1" /> -->
                                            <!--<button name="send_reservation_mail" type="object" string="Send Reservation Email" states="confirm" class="oe_highlight"/>-->
                                            <button name="confirm" string="Confirm" class="oe_highlight"
                                                type="object"
                                                attrs="{'invisible':[('state','not in',('draft','cancelled'))]}"
                                            />
                                            <button name="action_cancel" string="Cancel Reservation"
                                                class="oe_highlight" type="object"
                                                attrs="{'invisible':['|',('folio_id', '=', False),('state','not in',('confirm','booking'))]}"
                                            />
                                            <button name="action_reservation_checkout" string="Done"
                                                states="booking" class="oe_highlight"
                                                type="object"
                                            />
                                            <button name="draft" string="Set to Draft"
                                                states="cancelled" class="oe_highlight"
                                                type="object"
                                            />
                                            <button name="%(action_hotel_split_reservation)d" string="Split"
                                                type="action" class="oe_highlight"
                                                icon="fa-cut"
                                                attrs="{'invisible':['|',('folio_id', '=', False),('state','not in',('draft','confirm','booking'))]}"
                                            />
                                            <button name="unify" string="Unify"
                                                type="object" class="oe_highlight"
                                                icon="fa-compress"
                                                attrs="{'invisible':[('splitted', '=', False)]}"
                                            />
                                            <label for="preconfirm"
                                                string="Autoconfirm"
                                                attrs="{'invisible':[('folio_id', '!=', False)]}"
                                            />
                                            <span name="preconfirm" attrs="{'invisible':[('folio_id', '!=', False)]}">
                                                <field name="preconfirm" />
                                            </span>
                                            <!--button name="open_master" string="Open Master" type="object" class="oe_highlight" icon="fa-file" attrs="{'invisible':['|',['parent_reservation', '=', False]]}" /-->
                                            <field name="state" widget="statusbar"/>
                                        </header>
                                        <span class="label label-danger" attrs="{'invisible': [('state', 'not in', ('cancelled'))]}">Cancelled Reservation!</span>
                                        <span class="label label-warning" attrs="{'invisible': [('overbooking', '=', False)]}">OverBooking!</span>
                                        <h1>
                                            <field name="room_id" select="1"
                                              nolabel="1" options="{'no_create': True,'no_open': True}" placeholder="Room"
                                              style="margin-right: 30px;" required='1'/>
                                            <field name="partner_id" default_focus="1"
                                                placeholder="Lastname, Firstname"
                                                attrs="{'readonly':[('folio_id','!=',False)]}"
                                                required="1"/>
                                             <span class="fa fa-user" style="margin-left:20px;"/>
                                        </h1>
                                        <h3>
                                            <!-- <field name="room_id" select="1" domain="[('isroom','=',True)]"
                                                nolabel="1" options="{'no_create': True,'no_open': True}" placeholder="Room"
                                                style="margin-right: 30px;"/> -->
                                            From <span class="fa fa-sign-in" style="margin: 5px;"/><field name="checkin" style="margin-right: 10px;"/> to
                                            <span class="fa fa-sign-out" style="margin-right: 5px;"/><field name="checkout" />
                                        </h3>

                                        <group col="6">
                                            <group string="General Info" name="contact_details" >
                                                <field name="email" placeholder="email" widget="email" />
                                                <field name="mobile" placeholder="mobile" widget="phone" />
                                                <field name="phone" placeholder="phone" widget="phone" />
                                                <field name="pricelist_id"/>
                                                <field name="partner_internal_comment" string="Partner Note"/>
                                                <field name="cancelled_reason" attrs="{'invisible':[('state','not in',('cancelled'))]}"/>
                                            </group>
                                            <group colspan="4" string="Reservation Details" name="reservation_details">
                                                <field name="arrival_hour"/>
                                                <field name="departure_hour"/>
                                                <field name="nights" invisible="1"/>
                                                <field name="board_service_room_id" domain="[
                                                    ('hotel_room_type_id', '=', room_type_id),
                                                    ('pricelist_id', 'in', [pricelist_id, False])]" />
                                                <field name="name"/>
                                                <field name="adults"/>
                                                <field name="children"/>
                                                <field name="room_type_id" on_change="1" options="{'no_create': True,'no_open': True}"
                                                    attrs="{'readonly':[('state','not in',('draft'))]}"/>
                                                <field name="channel_type" attrs="{'required':[('reservation_type','not in',('staff','out'))]}"/>
                                            </group>
                                            <group class="oe_subtotal_footer" style="margin-right: 20px; !important" colspan="2" name="reservation_total" string="Amounts">
                                                <!-- <field name="amount_room" widget="monetary" options="{'currency_field': 'currency_id'}"/> -->
                                                <!-- <field name="discount" string="Room Discount" attrs="{'invisible': [('discount_type','=','fixed')]}" /> -->
                                                <!-- <field name="discount_fixed" string="Room Discount" attrs="{'invisible': [('discount_type','=','percent')]}" />
                                                <field name="discount_type" widget="radio" options="{'horizontal': true}" nolabel="1" colspan="2"/>
                                                <div class="oe_subtotal_footer_separator oe_inline o_td_label">
                                                    <label for="amount_discount" />
                                                    <button name="%(action_hotel_massive_price_change_reservation_days)d" string="Massive Day Prices"
                                                        type="action" class="oe_edit_only oe_link" icon="fa-bolt"/>
                                                </div>-->
                                                <!-- <field name="amount_discount" nolabel="1" widget='monetary'  class="oe_subtotal_footer_separator" options="{'currency_field': 'currency_id'}"/> -->
                                                <!--<div class="oe_subtotal_footer_separator oe_inline o_td_label">
                                                    <label for="amount_reservation_services" />
                                                </div>-->
                                                <!-- <field name="amount_reservation_services" nolabel="1" widget='monetary'  class="oe_subtotal_footer_separator" options="{'currency_field': 'currency_id'}"/> -->
                                                <field name="price_total" invisible="1"/>
                                                <!-- <field name="qty_delivered_updateable" invisible="1"/> -->
                                                <field name="state" invisible="1"/>
                                                <!-- <field name="invoice_status" invisible="1"/> -->
                                                <!-- <field name="customer_lead" invisible="1"/> -->
                                                <!-- <field name="currency_id" invisible="1"/> -->
                                                <field name="price_subtotal" widget="monetary" invisible="1"/>
                                                <!-- <field name="price_unit" invisible="1"/> -->
                                            </group>
                                        </group>
                                        <group invisible="1">
                                            <field name="company_id" options="{'no_create': True}" groups="base.group_multi_company"/>
                                            <!-- <field name="check_rooms" invisible="1"/> -->
                                            <field name="checkin_partner_pending_count" invisible="1"/>
                                        </group>
                                        <notebook>
                                            <page name="days" string="Service and Days">
                                                <group col="9">
                                                    <group colspan="6" string="Reservation Services" name="reservation_services" attrs="{'invisible': [('folio_id','=',False)]}">
                                                        <field name="service_ids"
                                                            context="{'default_ser_room_line': active_id, 'default_folio_id': folio_id}"
                                                            nolabel="1" style="padding-right:10px !important;">
                                                            <tree string="Services"  editable="bottom">
                                                                <field name="folio_id" invisible="1"/>
                                                                <!-- <field name="layout_category_id" groups="sale.group_sale_layout"/> -->
                                                                <field name="name"/>
                                                                <field name="ser_room_line" invisible="1" />
                                                                <!-- <field name="product_uom_qty"
                                                                    string="Ordered Qty"
                                                                    context="{'partner_id':parent.partner_id, 'quantity':product_uom_qty,  'uom':product_uom, 'company_id': parent.company_id}"
                                                                /> -->
                                                                <!-- <field name="qty_delivered" invisible="1"/> -->
                                                                    <!-- attrs="{'readonly': [('qty_delivered_updateable', '=', False)]}" -->
                                                                <!-- <field name="qty_invoiced" invisible="1"/> -->
                                                                <!-- <field name="qty_to_invoice" invisible="1"/> -->
                                                                <!-- <field name="product_uom"
                                                                    attrs="{'readonly': [('state', 'in', ('sale','done', 'cancel'))]}"
                                                                    context="{'company_id': parent.company_id}"
                                                                    groups="product.group_uom" options='{"no_open": True}'/> -->
                                                                <!-- <field name="analytic_tag_ids" groups="analytic.group_analytic_accounting" widget="many2many_tags"/> -->
                                                                <!-- <field name="price_unit"
                                                                    attrs="{'readonly': [('qty_invoiced', '&gt;', 0)]}"/> -->
                                                                <!-- <field name="tax_id" widget="many2many_tags" invisible="1"/> -->
                                                                <!-- <field name="discount" groups="sale.group_discount_per_so_line"/> -->
                                                                <!-- <field name="price_subtotal" widget="monetary" invisible="1"/> -->
                                                                <!-- <field name="price_total" widget="monetary"/> -->
                                                                <!-- <field name="qty_delivered_updateable" invisible="1"/> -->
                                                                <!-- <field name="state" invisible="1"/> -->
                                                                <!-- <field name="invoice_status" invisible="1"/> -->
                                                                <!-- <field name="customer_lead" invisible="1"/> -->
                                                                <!-- <field name="currency_id" invisible="1"/> -->
                                                            </tree>
                                                        </field>
                                                    </group>
                                                    <group colspan="3" string="Days" name="days">
                                                        <field name="reservation_line_ids" nolabel="1">
                                                            <tree create="false" delete="false" editable="bottom">
                                                                <field name="date" readonly="True" />
                                                                <field name="price" />
                                                                <field name="discount" />
                                                            </tree>
                                                        </field>
                                                    </group>
                                                 </group>
                                            </page>
                                            <page name="others" string="Others">
                                                <group>
                                                    <group>
                                                        <field name="segmentation_ids" widget="many2many_tags" placeholder="Segmentation..."
                                                            options="{'no_create': True,'no_open': True}" />
                                                        <field name="overbooking" />
                                                    </group>
                                                    <group>
                                                        <field name="reservation_type" />
                                                        <field name="out_service_description"
                                                               attrs="{'invisible':[('reservation_type','not in',('out'))]}"/>
                                                    </group>
                                                </group>
                                            </page>
                                        </notebook>
                                    </sheet>
                                    <div class="oe_chatter">
                                        <field name="message_follower_ids" widget="mail_followers"/>
                                        <field name="message_ids" widget="mail_thread"/>
                                    </div>
                                </form>
                            </field>
                            <separator string="Service Lines" colspan="4"/>
                            <field name="service_ids"
                                    context="{'default_folio_id': active_id}"
                                    nolabel="1">
                                    <tree string="Services" editable="bottom">
                                        <field name="folio_id" invisible="1"/>
                                        <!-- <field name="layout_category_id" groups="sale.group_sale_layout"/> -->
                                        <field name="product_id"
                                            domain="[('sale_ok', '=', True)]"
                                            options="{'create': False, 'create_edit': False}" />
                                        <field name="name"/>
                                        <field name="ser_room_line" options="{'create': False, 'create_edit': False}"/>
                                        <!-- <field name="product_uom_qty"
                                            string="Ordered Qty"
                                            context="{'partner_id':parent.partner_id, 'quantity':product_uom_qty, 'uom':product_uom, 'company_id': parent.company_id}"
                                        /> -->
                                        <!-- <field name="qty_delivered" invisible="1"/> -->
                                            <!-- attrs="{'readonly': [('qty_delivered_updateable', '=', False)]}"/> -->
                                        <!-- <field name="qty_invoiced" invisible="1"/> -->
                                        <!-- <field name="qty_to_invoice" invisible="1"/> -->
                                        <!-- <field name="product_uom"
                                            attrs="{'readonly': [('state', 'in', ('sale','done', 'cancel'))]}"
                                            context="{'company_id': parent.company_id}"
                                            groups="product.group_uom" options='{"no_open": True}'/> -->
                                        <!-- <field name="analytic_tag_ids" groups="analytic.group_analytic_accounting" widget="many2many_tags"/> -->
                                        <!-- <field name="price_unit"
                                            attrs="{'readonly': [('qty_invoiced', '&gt;', 0)]}"/> -->
                                        <!-- <field name="tax_id" widget="many2many_tags" domain="[('type_tax_use','=','sale'),('company_id','=',parent.company_id)]"
                                            attrs="{'readonly': [('qty_invoiced', '&gt;', 0)]}"/> -->
                                        <!-- <field name="discount" groups="sale.group_discount_per_so_line"/> -->
                                        <!-- <field name="price_subtotal" widget="monetary" invisible="1"/> -->
                                        <!-- <field name="price_total" widget="monetary"/> -->
                                        <!-- <field name="qty_delivered_updateable" invisible="1"/> -->
                                        <!-- <field name="state" invisible="1"/> -->
                                        <!-- <field name="invoice_status" invisible="1"/> -->
                                        <!-- <field name="customer_lead" invisible="1"/> -->
                                        <!-- <field name="currency_id" invisible="1"/> -->
                                        <field name="channel_type" sttrs="{'invisible':[('channel_type', '!=', 'call')]"/>
                                    </tree>
                                </field>
                                <group colspan="2" class="oe_subtotal_footer oe_right">
                                    <field name="amount_untaxed" sum="Untaxed amount" widget='monetary' />
                                    <field name="amount_tax" widget='monetary' />
                                    <div class="oe_subtotal_footer_separator oe_inline">
                                        <label for="amount_total" />
                                    </div>
                                    <field name="amount_total" nolabel="1" sum="Total amount"
                                       widget='monetary' />
                                </group>
                            <div class="oe_clear" />
                            <group>
                                <field name="note" />
                            </group>
                        </page>
                        <page string="Other data" invisible="1">
                            <group>
                                <field name="user_id" />
                                <field name="client_order_ref" />
                            </group>
                        </page>
                        <!-- <page string="Foreign Exchange" name="foreign exchange" invisible="1">
                            <separator string="Foreign Exchange" colspan="4" />
                            <field name="currrency_ids" colspan="4" nolabel="1">
                                <tree>
                                    <field name="name" />
                                    <field name="today_date" />
                                    <field name="type" />
                                    <field name="in_amount" />
                                    <field name="input_curr" />
                                    <field name="total" sum="Total Amount" />
                                    <field name="out_curr" />
                                </tree>
                            </field>
                        </page> -->
                    </notebook>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>
            </form>
        </field>
    </record>

    <!-- Tree view of hotel folio -->
    <record model="ir.ui.view" id="hotel_folio_view_tree">
        <field name="name">hotel.folio.tree</field>
        <field name="model">hotel.folio</field>
        <field name="arch" type="xml">
            <tree string="Hotel Folio" decoration-info="state == 'draft'"
                    decoration-muted="state == 'cancel'"
                    default_order="create_date desc">
                <field name="state"/>
                <field name="name"/>
                <field name="partner_id" select="1"/>
                <field name="date_order" select="1"/>
                <field name="rooms_char" string="Rooms"/>
                <field name="amount_total" sum="Total amount"/>
            </tree>
        </field>
    </record>

    <!-- Folio Kanban View -->
    <record model="ir.ui.view" id="hotel_folio_view_kanban">
        <field name="name">hotel.folio.kanban</field>
        <field name="model">hotel.folio</field>
        <field name="arch" type="xml">
            <kanban class="o_res_partner_kanban" limit="80">
                <field name="name"/>
                <field name="partner_id"/>
                <field name="room_lines"/>
                <field name="service_ids"/>
                <field name="pending_amount"/>
                <field name="refund_amount"/>
                <field name="invoices_paid"/>
                <field name="booking_pending"/>
                <field name="checkin_partner_count"/>
                <field name="checkin_partner_pending_count"/>
                <field name="partner_internal_comment"/>
                <field name="cancelled_reason"/>
                <field name="prepaid_warning_days"/>
                <field name="date_order"/>
                <templates>
                    <t t-name="kanban-box">
                        <div class="oe_kanban_global_click o_res_partner_kanban">
                            <div class="o_kanban_tags_section oe_kanban_partner_categories"/>
                            <div class="oe_kanban_details">
                                <strong class="oe_partner_heading"><field name="partner_id"/></strong>
                                <ul>
                                    <li t-if="record.name.raw_value"><field name="name"/></li>
                                    <span t-if="record.checkin_partner_count.value&gt;0" class="badge"><i class="fa fa-fw fa-bed"/><t t-esc="record.checkin_partner_count.value"/></span>
                                    <span t-if="record.checkin_partner_pending_count.value&gt;0" class="badge"><i class="fa fa-fw fa-user-plus"/><t t-esc="record.checkin_partner_pending_count.value"/></span>
                                </ul>
                                <div class="oe_kanban_partner_links"/>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>

    <!-- Search view of hotel folio -->
    <record model="ir.ui.view" id="hotel_folio_view_search">
        <field name="name">hotel.folio.search</field>
        <field name="model">hotel.folio</field>
        <field name="arch" type="xml">
            <search string="Tables Detail">
                <field name="partner_id" />
                <group expand="0" string="Group By">
                    <filter string="Customer" icon="terp-stock_symbol-selection"
                        context="{'group_by':'partner_id'}" />
                </group>
            </search>
        </field>
    </record>

    <!--graph view of hotel folio -->
    <record id="hotel_folio_view_graph" model="ir.ui.view">
        <field name="name">view.hotel.folio.graph</field>
        <field name="model">hotel.folio</field>
        <field name="arch" type="xml">
            <graph type="bar">
            </graph>
        </field>
    </record>

    <!-- Add create invoice merge folio -->

    <act_window id="action_view_folio_advance_payment_inv"
        name="Invoice Folio"
        src_model="hotel.folio"
        res_model="folio.advance.payment.inv"
        key2="client_action_multi" target="new"
        view_mode="form" multi="True"/>

    <act_window name="Send Confirm Mail"
        res_model="mail.compose.message"
        src_model="hotel.folio"
        view_mode="form"
        multi="False"
        view_type="form"
        target="new"
        key2="client_action_multi"
        id="action_view_folio_send_confirm_mail"
        context="{
            'default_model': 'hotel.folio',
            'default_res_id': active_id,
            'default_use_template': True,
            'default_template_id': ref('hotel.mail_template_hotel_reservation'),
            'default_composition_mode': 'comment',
            'force_send': True,
            'mark_so_as_sent': True,
        }" />

    <!-- Action for hotel folio -->
    <record model="ir.actions.act_window" id="open_hotel_folio1_form_tree_all">
        <field name="name">Hotel Folio</field>
        <field name="res_model">hotel.folio</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form,graph</field>
    </record>

    <menuitem id="menu_all_folio" name="Folio"
        parent="hotel.hotel_management_menu" sequence="4"/>
    <menuitem name="Generate Folio" id="menu_open_hotel_folio1_form_tree_all"
        action="open_hotel_folio1_form_tree_all" sequence="5" parent="menu_all_folio" />

</odoo>
